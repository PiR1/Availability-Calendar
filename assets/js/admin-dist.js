var e=new Date,t=e.getMonth(),a=e.getFullYear(),n=["Janvier","FÃ©vrier","Mars","Avril","Mai","Juin","Juillet","Aout","Septembre","Octobre","Novembre","Decembre"];let d,l,o;function i(t,a){loadEvents();let d=(new Date(a,t).getDay()-1+7)%7,l=32-new Date(a,t,32).getDate(),i=document.getElementById("calendar-body");i.innerHTML="",o.innerHTML=n[t]+" "+a;let r=1;for(let n=0;n<6&&!(r>l);n++){let o=document.createElement("div");o.classList.add("d-flex","w-100");for(let i=0;i<7;i++){let c=document.createElement("div");if(c.classList.add("d-flex","border","rounded-0","flex-fill","w-100","justify-content-center","pt-3","pb-3","btn"),0===n&&i<d||r>l){let e=document.createTextNode("");c.appendChild(e),o.appendChild(c)}else{let n=document.createTextNode(r);c.setAttribute("data-date",a+"-"+("0"+(t+1)).slice(-2)+"-"+("0"+r).slice(-2)),r===e.getDate()&&a===e.getFullYear()&&t===e.getMonth()&&c.classList.add("bg-info"),eventOnDay(new Date(a,t,r,0,UTCOffset,0),jsonDates)&&c.classList.add("bg-danger"),c.appendChild(n),o.appendChild(c),r++}}i.appendChild(o)}$("td").on("click",(function(){console.log({date:$(this).attr("data-date")}),$(this).attr("data-date")&&$.ajax({method:"POST",context:this,url:url_ajax_event+"php/event/changeState",data:JSON.stringify({date:$(this).attr("data-date")}),contentType:"application/json",dataType:"json"}).done((function(e){console.log(e),$(this).toggleClass("bg-danger")})).fail((function(e){console.error(e.responseText)}))}))}$(".calendar").load(url_ajax_event+"includes/calendar.html",(function(){d=document.getElementById("year"),l=document.getElementById("month"),o=document.getElementById("monthAndYear"),i(t,a)}));